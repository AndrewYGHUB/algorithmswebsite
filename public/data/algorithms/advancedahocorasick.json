{
  "slug": "advancedahocorasick",
  "name": "Advancedahocorasick",
  "categories": [
    "strings",
    "ahocorasick"
  ],
  "body": {},
  "implementations": {
    "go": {
      "dir": "strings/ahocorasick/advancedahocorasick.go",
      "url": "https://github.com/TheAlgorithms/go/tree/master/strings/ahocorasick/advancedahocorasick.go",
      "code": "<span class=\"hljs-keyword\">package</span> ahocorasick\n\n<span class=\"hljs-keyword\">import</span> (\n\t<span class=\"hljs-string\">&quot;fmt&quot;</span>\n\t<span class=\"hljs-string\">&quot;time&quot;</span>\n)\n\n<span class=\"hljs-comment\">// Advanced Function performing the Advanced Aho-Corasick algorithm.</span>\n<span class=\"hljs-comment\">// Finds and prints occurrences of each pattern.</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">Advanced</span><span class=\"hljs-params\">(t <span class=\"hljs-type\">string</span>, p []<span class=\"hljs-type\">string</span>)</span></span> Result {\n\tstartTime := time.Now()\n\toccurrences := <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">map</span>[<span class=\"hljs-type\">int</span>][]<span class=\"hljs-type\">int</span>)\n\tac, f := BuildExtendedAc(p)\n\tcurrent := <span class=\"hljs-number\">0</span>\n\t<span class=\"hljs-keyword\">for</span> pos := <span class=\"hljs-number\">0</span>; pos &lt; <span class=\"hljs-built_in\">len</span>(t); pos++ {\n\t\t<span class=\"hljs-keyword\">if</span> GetTransition(current, t[pos], ac) != <span class=\"hljs-number\">-1</span> {\n\t\t\tcurrent = GetTransition(current, t[pos], ac)\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\tcurrent = <span class=\"hljs-number\">0</span>\n\t\t}\n\t\t_, ok := f[current]\n\t\t<span class=\"hljs-keyword\">if</span> ok {\n\t\t\t<span class=\"hljs-keyword\">for</span> i := <span class=\"hljs-keyword\">range</span> f[current] {\n\t\t\t\t<span class=\"hljs-keyword\">if</span> p[f[current][i]] == GetWord(pos-<span class=\"hljs-built_in\">len</span>(p[f[current][i]])+<span class=\"hljs-number\">1</span>, pos, t) { <span class=\"hljs-comment\">//check for word match</span>\n\t\t\t\t\tnewOccurrences := IntArrayCapUp(occurrences[f[current][i]])\n\t\t\t\t\toccurrences[f[current][i]] = newOccurrences\n\t\t\t\t\toccurrences[f[current][i]][<span class=\"hljs-built_in\">len</span>(newOccurrences)<span class=\"hljs-number\">-1</span>] = pos - <span class=\"hljs-built_in\">len</span>(p[f[current][i]]) + <span class=\"hljs-number\">1</span>\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telapsed := time.Since(startTime)\n\tfmt.Printf(<span class=\"hljs-string\">&quot;\\n\\nElapsed %f secs\\n&quot;</span>, elapsed.Seconds())\n\n\t<span class=\"hljs-keyword\">var</span> resultOccurrences = <span class=\"hljs-built_in\">make</span>(<span class=\"hljs-keyword\">map</span>[<span class=\"hljs-type\">string</span>][]<span class=\"hljs-type\">int</span>)\n\t<span class=\"hljs-keyword\">for</span> key, value := <span class=\"hljs-keyword\">range</span> occurrences {\n\t\tresultOccurrences[p[key]] = value\n\t}\n\n\t<span class=\"hljs-keyword\">return</span> Result{\n\t\tresultOccurrences,\n\t}\n}\n\n<span class=\"hljs-comment\">// BuildExtendedAc Functions that builds extended Aho Corasick automaton.</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">BuildExtendedAc</span><span class=\"hljs-params\">(p []<span class=\"hljs-type\">string</span>)</span></span> (acToReturn <span class=\"hljs-keyword\">map</span>[<span class=\"hljs-type\">int</span>]<span class=\"hljs-keyword\">map</span>[<span class=\"hljs-type\">uint8</span>]<span class=\"hljs-type\">int</span>, f <span class=\"hljs-keyword\">map</span>[<span class=\"hljs-type\">int</span>][]<span class=\"hljs-type\">int</span>) {\n\tacTrie, stateIsTerminal, f := ConstructTrie(p)\n\ts := <span class=\"hljs-built_in\">make</span>([]<span class=\"hljs-type\">int</span>, <span class=\"hljs-built_in\">len</span>(stateIsTerminal)) <span class=\"hljs-comment\">//supply function</span>\n\ti := <span class=\"hljs-number\">0</span>                                 <span class=\"hljs-comment\">//root of acTrie</span>\n\tacToReturn = acTrie\n\ts[i] = <span class=\"hljs-number\">-1</span>\n\t<span class=\"hljs-keyword\">for</span> current := <span class=\"hljs-number\">1</span>; current &lt; <span class=\"hljs-built_in\">len</span>(stateIsTerminal); current++ {\n\t\to, parent := GetParent(current, acTrie)\n\t\tdown := s[parent]\n\t\t<span class=\"hljs-keyword\">for</span> StateExists(down, acToReturn) &amp;&amp; GetTransition(down, o, acToReturn) == <span class=\"hljs-number\">-1</span> {\n\t\t\tdown = s[down]\n\t\t}\n\t\t<span class=\"hljs-keyword\">if</span> StateExists(down, acToReturn) {\n\t\t\ts[current] = GetTransition(down, o, acToReturn)\n\t\t\t<span class=\"hljs-keyword\">if</span> stateIsTerminal[s[current]] {\n\t\t\t\tstateIsTerminal[current] = <span class=\"hljs-literal\">true</span>\n\t\t\t\tf[current] = ArrayUnion(f[current], f[s[current]]) <span class=\"hljs-comment\">//F(Current) &lt;- F(Current) union F(S(Current))</span>\n\t\t\t}\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\ts[current] = i <span class=\"hljs-comment\">//initial state?</span>\n\t\t}\n\t}\n\ta := ComputeAlphabet(p) <span class=\"hljs-comment\">// concat of all patterns in p</span>\n\t<span class=\"hljs-keyword\">for</span> j := <span class=\"hljs-keyword\">range</span> a {\n\t\t<span class=\"hljs-keyword\">if</span> GetTransition(i, a[j], acToReturn) == <span class=\"hljs-number\">-1</span> {\n\t\t\tCreateTransition(i, a[j], i, acToReturn)\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">for</span> current := <span class=\"hljs-number\">1</span>; current &lt; <span class=\"hljs-built_in\">len</span>(stateIsTerminal); current++ {\n\t\t<span class=\"hljs-keyword\">for</span> j := <span class=\"hljs-keyword\">range</span> a {\n\t\t\t<span class=\"hljs-keyword\">if</span> GetTransition(current, a[j], acToReturn) == <span class=\"hljs-number\">-1</span> {\n\t\t\t\tCreateTransition(current, a[j], GetTransition(s[current], a[j], acToReturn), acToReturn)\n\t\t\t}\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">return</span> acToReturn, f\n}\n"
    }
  },
  "contributors": [
    {
      "name": "Taj",
      "email": "tjgurwara99@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Rak Laptudirm",
      "email": "raklaptudirm@gmail.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}