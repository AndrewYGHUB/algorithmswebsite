{
  "slug": "damm",
  "name": "Damm",
  "categories": [
    "others"
  ],
  "body": {},
  "implementations": {
    "java": {
      "dir": "src/main/java/com/thealgorithms/others/Damm.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src/main/java/com/thealgorithms/others/Damm.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.others;\n\n<span class=\"hljs-keyword\">import</span> java.util.Objects;\n\n<span class=\"hljs-comment\">/**\n * Damm algorithm is a check digit algorithm that detects all single-digit\n * errors and all adjacent transposition errors. It was presented by H. Michael\n * Damm in 2004. Essential part of the algorithm is a quasigroup of order 10\n * (i.e. having a 10 Ã— 10 Latin square as the body of its operation table) with\n * the special feature of being weakly totally anti-symmetric. Damm revealed\n * several methods to create totally anti-symmetric quasigroups of order 10 and\n * gave some examples in his doctoral dissertation.\n *\n * <span class=\"hljs-doctag\">@see</span> &lt;a href=&quot;https://en.wikipedia.org/wiki/Damm_algorithm&quot;&gt;Wiki. Damm\n * algorithm&lt;/a&gt;\n */</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Damm</span> {\n\n    <span class=\"hljs-comment\">/**\n     * Weakly totally anti-symmetric quasigroup of order 10. This table is not\n     * the only possible realisation of weak totally anti-symmetric quasigroup\n     * but the most common one (taken from Damm doctoral dissertation). All\n     * zeros lay on the diagonal because it simplifies the check digit\n     * calculation.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">byte</span>[][] DAMM_TABLE = {\n        {<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>},\n        {<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">3</span>},\n        {<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">9</span>},\n        {<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">6</span>},\n        {<span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>},\n        {<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">1</span>},\n        {<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>},\n        {<span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">7</span>},\n        {<span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>},\n        {<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">0</span>}\n    };\n\n    <span class=\"hljs-comment\">/**\n     * Check input digits by Damm algorithm.\n     *\n     * <span class=\"hljs-doctag\">@param</span> digits input to check\n     * <span class=\"hljs-doctag\">@return</span> true if check was successful, false otherwise\n     * <span class=\"hljs-doctag\">@throws</span> IllegalArgumentException if input parameter contains not only\n     * digits\n     * <span class=\"hljs-doctag\">@throws</span> NullPointerException if input is null\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">dammCheck</span><span class=\"hljs-params\">(String digits)</span> {\n        checkInput(digits);\n        <span class=\"hljs-type\">int</span>[] numbers = toIntArray(digits);\n\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">checksum</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> number : numbers) {\n            checksum = DAMM_TABLE[checksum][number];\n        }\n\n        <span class=\"hljs-type\">return</span> <span class=\"hljs-variable\">checksum</span> <span class=\"hljs-operator\">=</span>= <span class=\"hljs-number\">0</span>;\n    }\n\n    <span class=\"hljs-comment\">/**\n     * Calculate check digit for initial digits and add it tho the last\n     * position.\n     *\n     * <span class=\"hljs-doctag\">@param</span> initialDigits initial value\n     * <span class=\"hljs-doctag\">@return</span> digits with the checksum in the last position\n     * <span class=\"hljs-doctag\">@throws</span> IllegalArgumentException if input parameter contains not only\n     * digits\n     * <span class=\"hljs-doctag\">@throws</span> NullPointerException if input is null\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> String <span class=\"hljs-title function_\">addDammChecksum</span><span class=\"hljs-params\">(String initialDigits)</span> {\n        checkInput(initialDigits);\n        <span class=\"hljs-type\">int</span>[] numbers = toIntArray(initialDigits);\n\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">checksum</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> number : numbers) {\n            checksum = DAMM_TABLE[checksum][number];\n        }\n\n        <span class=\"hljs-keyword\">return</span> initialDigits + checksum;\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n        System.out.println(<span class=\"hljs-string\">&quot;Damm algorithm usage examples:&quot;</span>);\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">validInput</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;5724&quot;</span>;\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">invalidInput</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;5824&quot;</span>;\n        checkAndPrint(validInput);\n        checkAndPrint(invalidInput);\n\n        System.out.println(<span class=\"hljs-string\">&quot;\\nCheck digit generation example:&quot;</span>);\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">input</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;572&quot;</span>;\n        generateAndPrint(input);\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">checkAndPrint</span><span class=\"hljs-params\">(String input)</span> {\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">validationResult</span> <span class=\"hljs-operator\">=</span> Damm.dammCheck(input)\n                ? <span class=\"hljs-string\">&quot;valid&quot;</span>\n                : <span class=\"hljs-string\">&quot;not valid&quot;</span>;\n        System.out.println(<span class=\"hljs-string\">&quot;Input &#x27;&quot;</span> + input + <span class=\"hljs-string\">&quot;&#x27; is &quot;</span> + validationResult);\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">generateAndPrint</span><span class=\"hljs-params\">(String input)</span> {\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">result</span> <span class=\"hljs-operator\">=</span> addDammChecksum(input);\n        System.out.println(<span class=\"hljs-string\">&quot;Generate and add checksum to initial value &#x27;&quot;</span> + input + <span class=\"hljs-string\">&quot;&#x27;. Result: &#x27;&quot;</span> + result + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">checkInput</span><span class=\"hljs-params\">(String input)</span> {\n        Objects.requireNonNull(input);\n        <span class=\"hljs-keyword\">if</span> (!input.matches(<span class=\"hljs-string\">&quot;\\\\d+&quot;</span>)) {\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalArgumentException</span>(<span class=\"hljs-string\">&quot;Input &#x27;&quot;</span> + input + <span class=\"hljs-string\">&quot;&#x27; contains not only digits&quot;</span>);\n        }\n    }\n\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">int</span>[] toIntArray(String string) {\n        <span class=\"hljs-keyword\">return</span> string.chars()\n                .map(i -&gt; Character.digit(i, <span class=\"hljs-number\">10</span>))\n                .toArray();\n    }\n}\n"
    }
  },
  "contributors": [
    {
      "name": "Artem Boiarshinov",
      "email": "54187376+Boiarshinov@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}