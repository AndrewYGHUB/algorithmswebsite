{
  "slug": "fibonacci-java-streams",
  "name": "Fibonacci Java Streams",
  "categories": [
    "math"
  ],
  "body": {},
  "implementations": {
    "java": {
      "dir": "src/main/java/com/thealgorithms/maths/FibonacciJavaStreams.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src/main/java/com/thealgorithms/maths/FibonacciJavaStreams.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.maths;\n\n<span class=\"hljs-keyword\">import</span> java.math.BigDecimal;\n<span class=\"hljs-keyword\">import</span> java.util.List;\n<span class=\"hljs-keyword\">import</span> java.util.Objects;\n<span class=\"hljs-keyword\">import</span> java.util.Optional;\n<span class=\"hljs-keyword\">import</span> java.util.stream.Stream;\n\n<span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@author</span>: caos321\n * <span class=\"hljs-doctag\">@date</span>: 14 October 2021 (Thursday)\n */</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FibonacciJavaStreams</span> {\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Optional&lt;BigDecimal&gt; <span class=\"hljs-title function_\">calculate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> BigDecimal index)</span> {\n        <span class=\"hljs-keyword\">if</span> (index == <span class=\"hljs-literal\">null</span> || index.compareTo(BigDecimal.ZERO) &lt; <span class=\"hljs-number\">0</span>) {\n            <span class=\"hljs-keyword\">return</span> Optional.empty();\n        }\n\n        <span class=\"hljs-keyword\">if</span> (index.compareTo(BigDecimal.ONE) &lt; <span class=\"hljs-number\">0</span>) {\n            <span class=\"hljs-keyword\">return</span> Optional.of(BigDecimal.ZERO);\n        }\n\n        <span class=\"hljs-keyword\">if</span> (index.compareTo(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>)) &lt; <span class=\"hljs-number\">0</span>) {\n            <span class=\"hljs-keyword\">return</span> Optional.of(BigDecimal.ONE);\n        }\n\n        <span class=\"hljs-keyword\">final</span> List&lt;BigDecimal&gt; results = Stream.iterate(\n                index,\n                x -&gt; x.compareTo(BigDecimal.ZERO) &gt; <span class=\"hljs-number\">0</span>,\n                x -&gt; x.subtract(BigDecimal.ONE)\n        )\n                .reduce(\n                        List.of(),\n                        (list, current)\n                        -&gt; list.isEmpty() || list.size() &lt; <span class=\"hljs-number\">2</span>\n                        ? List.of(BigDecimal.ZERO, BigDecimal.ONE)\n                        : List.of(list.get(<span class=\"hljs-number\">1</span>), list.get(<span class=\"hljs-number\">0</span>).add(list.get(<span class=\"hljs-number\">1</span>))),\n                        (list1, list2) -&gt; list1\n                );\n\n        <span class=\"hljs-keyword\">return</span> results.isEmpty()\n                ? Optional.empty()\n                : Optional.of(results.get(results.size() - <span class=\"hljs-number\">1</span>));\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">assertThat</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> Object actual, <span class=\"hljs-keyword\">final</span> Object expected)</span> {\n        <span class=\"hljs-keyword\">if</span> (!Objects.equals(actual, expected)) {\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AssertionError</span>(String.format(<span class=\"hljs-string\">&quot;expected=%s but was actual=%s&quot;</span>, expected, actual));\n        }\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String[] args)</span> {\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(-<span class=\"hljs-number\">1</span>));\n            assertThat(result.isEmpty(), <span class=\"hljs-literal\">true</span>);\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(BigDecimal.ZERO);\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, BigDecimal.ZERO));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(BigDecimal.ONE);\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, BigDecimal.ONE));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, BigDecimal.ONE));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">3</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">10</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">55</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">20</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">6765</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">30</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">832040</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">40</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">102334155</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">50</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">12586269025L</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">100</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-string\">&quot;354224848179261915075&quot;</span>)));\n        }\n        {\n            <span class=\"hljs-keyword\">final</span> Optional&lt;BigDecimal&gt; result = calculate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">200</span>));\n            assertThat(result.isPresent(), <span class=\"hljs-literal\">true</span>);\n            result.ifPresent(value -&gt; assertThat(value, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-string\">&quot;280571172992510140037611932413038677189525&quot;</span>)));\n        }\n    }\n}\n"
    }
  },
  "contributors": [
    {
      "name": "caos321",
      "email": "36530240+caos321@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}