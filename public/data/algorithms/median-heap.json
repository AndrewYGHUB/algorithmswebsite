{
  "slug": "median-heap",
  "name": "Median Heap",
  "categories": [
    "datastructures"
  ],
  "body": {},
  "implementations": {
    "lua": {
      "dir": "src/data_structures/median_heap.lua",
      "url": "https://github.com/TheAlgorithms/lua/tree/master/src/data_structures/median_heap.lua",
      "code": "<span class=\"hljs-keyword\">local</span> heap = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;data_structures.heap&quot;</span>)\n\n<span class=\"hljs-comment\">-- A heap which provides the median, defined as the floor(n/2)-th smallest element, as its top element</span>\n<span class=\"hljs-keyword\">local</span> median_heap = {}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap.less_than</span><span class=\"hljs-params\">(a, b)</span></span>\n\t<span class=\"hljs-keyword\">return</span> a &lt; b\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap.new</span><span class=\"hljs-params\">(less_than)</span></span>\n\t<span class=\"hljs-keyword\">local</span> <span class=\"hljs-built_in\">self</span>\n\t<span class=\"hljs-built_in\">self</span> = {\n\t\tless_than = less_than,\n\t\tlower_half = heap.new(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(a, b)</span></span>\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">self</span>.less_than(b, a) <span class=\"hljs-comment\">-- max heap</span>\n\t\t<span class=\"hljs-keyword\">end</span>),\n\t\tupper_half = heap.new(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(a, b)</span></span>\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">self</span>.less_than(a, b) <span class=\"hljs-comment\">-- min heap</span>\n\t\t<span class=\"hljs-keyword\">end</span>),\n\t}\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">self</span>\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap:empty</span><span class=\"hljs-params\">()</span></span>\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">self</span>.lower_half:empty()\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap:size</span><span class=\"hljs-params\">()</span></span>\n\t<span class=\"hljs-keyword\">return</span> #<span class=\"hljs-built_in\">self</span>.lower_half + #<span class=\"hljs-built_in\">self</span>.upper_half\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap:top</span><span class=\"hljs-params\">()</span></span>\n\t<span class=\"hljs-comment\">-- the median</span>\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">self</span>.lower_half:top()\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap:pop</span><span class=\"hljs-params\">()</span></span>\n\t<span class=\"hljs-keyword\">local</span> value = <span class=\"hljs-built_in\">self</span>.lower_half:pop()\n\t<span class=\"hljs-keyword\">if</span> #<span class=\"hljs-built_in\">self</span>.lower_half &lt; #<span class=\"hljs-built_in\">self</span>.upper_half <span class=\"hljs-keyword\">then</span>\n\t\t<span class=\"hljs-built_in\">self</span>.lower_half:push(<span class=\"hljs-built_in\">self</span>.upper_half:pop())\n\t<span class=\"hljs-keyword\">end</span>\n\t<span class=\"hljs-keyword\">return</span> value\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">median_heap:push</span><span class=\"hljs-params\">(value)</span></span>\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">self</span>:empty() <span class=\"hljs-keyword\">then</span>\n\t\t<span class=\"hljs-built_in\">self</span>.lower_half:push(value)\n\t<span class=\"hljs-keyword\">elseif</span> <span class=\"hljs-built_in\">self</span>.less_than(value, <span class=\"hljs-built_in\">self</span>:top()) <span class=\"hljs-keyword\">then</span>\n\t\t<span class=\"hljs-built_in\">self</span>.lower_half:push(value)\n\t\t<span class=\"hljs-keyword\">if</span> #<span class=\"hljs-built_in\">self</span>.lower_half - #<span class=\"hljs-built_in\">self</span>.upper_half &gt; <span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">then</span>\n\t\t\t<span class=\"hljs-built_in\">self</span>.upper_half:push(<span class=\"hljs-built_in\">self</span>.lower_half:pop())\n\t\t<span class=\"hljs-keyword\">end</span>\n\t<span class=\"hljs-keyword\">else</span>\n\t\t<span class=\"hljs-built_in\">self</span>.upper_half:push(value)\n\t\t<span class=\"hljs-keyword\">if</span> #<span class=\"hljs-built_in\">self</span>.lower_half &lt; #<span class=\"hljs-built_in\">self</span>.upper_half <span class=\"hljs-keyword\">then</span>\n\t\t\t<span class=\"hljs-built_in\">self</span>.lower_half:push(<span class=\"hljs-built_in\">self</span>.upper_half:pop())\n\t\t<span class=\"hljs-keyword\">end</span>\n\t<span class=\"hljs-keyword\">end</span>\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;class&quot;</span>)(median_heap)\n"
    }
  },
  "contributors": [
    {
      "name": "Lars MÃ¼ller",
      "email": "34514239+appgurueu@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Lars Mueller",
      "email": "appgurulars@gmx.de",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}