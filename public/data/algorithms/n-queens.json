{
  "slug": "n-queens",
  "name": "N Queens",
  "categories": [
    "backtracking"
  ],
  "body": {},
  "implementations": {
    "python": {
      "dir": "backtracking/n_queens.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/backtracking/n_queens.py",
      "code": "<span class=\"hljs-string\">&quot;&quot;&quot;\n\n The nqueens problem is of placing N queens on a N * N\n chess board such that no queen can attack any other queens placed\n on that chess board.\n This means that one queen cannot have any other queen on its horizontal, vertical and\n diagonal lines.\n\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> __future__ <span class=\"hljs-keyword\">import</span> annotations\n\nsolution = []\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">isSafe</span>(<span class=\"hljs-params\">board: <span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">int</span>]], row: <span class=\"hljs-built_in\">int</span>, column: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">bool</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    This function returns a boolean value True if it is safe to place a queen there\n    considering the current state of the board.\n\n    Parameters :\n    board(2D matrix) : board\n    row ,column : coordinates of the cell on a board\n\n    Returns :\n    Boolean Value\n\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(board)):\n        <span class=\"hljs-keyword\">if</span> board[row][i] == <span class=\"hljs-number\">1</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(board)):\n        <span class=\"hljs-keyword\">if</span> board[i][column] == <span class=\"hljs-number\">1</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">for</span> i, j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">zip</span>(<span class=\"hljs-built_in\">range</span>(row, -<span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>), <span class=\"hljs-built_in\">range</span>(column, -<span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>)):\n        <span class=\"hljs-keyword\">if</span> board[i][j] == <span class=\"hljs-number\">1</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">for</span> i, j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">zip</span>(<span class=\"hljs-built_in\">range</span>(row, -<span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>), <span class=\"hljs-built_in\">range</span>(column, <span class=\"hljs-built_in\">len</span>(board))):\n        <span class=\"hljs-keyword\">if</span> board[i][j] == <span class=\"hljs-number\">1</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">solve</span>(<span class=\"hljs-params\">board: <span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">int</span>]], row: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">bool</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    It creates a state space tree and calls the safe function until it receives a\n    False Boolean and terminates that branch and backtracks to the next\n    possible solution branch.\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">if</span> row &gt;= <span class=\"hljs-built_in\">len</span>(board):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        If the row number exceeds N we have board with a successful combination\n        and that combination is appended to the solution list and the board is printed.\n\n        &quot;&quot;&quot;</span>\n        solution.append(board)\n        printboard(board)\n        <span class=\"hljs-built_in\">print</span>()\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(board)):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        For every row it iterates through each column to check if it is feasible to\n        place a queen there.\n        If all the combinations for that particular branch are successful the board is\n        reinitialized for the next possible combination.\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">if</span> isSafe(board, row, i):\n            board[row][i] = <span class=\"hljs-number\">1</span>\n            solve(board, row + <span class=\"hljs-number\">1</span>)\n            board[row][i] = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">printboard</span>(<span class=\"hljs-params\">board: <span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">int</span>]]</span>) -&gt; <span class=\"hljs-literal\">None</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Prints the boards that have a successful combination.\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(board)):\n        <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-built_in\">len</span>(board)):\n            <span class=\"hljs-keyword\">if</span> board[i][j] == <span class=\"hljs-number\">1</span>:\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Q&quot;</span>, end=<span class=\"hljs-string\">&quot; &quot;</span>)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;.&quot;</span>, end=<span class=\"hljs-string\">&quot; &quot;</span>)\n        <span class=\"hljs-built_in\">print</span>()\n\n\n<span class=\"hljs-comment\"># n=int(input(&quot;The no. of queens&quot;))</span>\nn = <span class=\"hljs-number\">8</span>\nboard = [[<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n)] <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n)]\nsolve(board, <span class=\"hljs-number\">0</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;The total no. of solutions are :&quot;</span>, <span class=\"hljs-built_in\">len</span>(solution))\n"
    },
    "c-plus-plus": {
      "dir": "backtracking/n_queens.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/backtracking/n_queens.cpp",
      "code": "<span class=\"hljs-comment\">/**\n * @file\n * @brief [Eight Queens](https://en.wikipedia.org/wiki/Eight_queens_puzzle)\n * puzzle\n *\n * @details\n * The **eight queens puzzle** is the problem of placing eight chess queens on\n * an 8×8 chessboard so that no two queens threaten each other; thus, a solution\n * requires that no two queens share the same row, column, or diagonal. The\n * eight queens puzzle is an example of the more general **n queens problem** of\n * placing n non-attacking queens on an n×n chessboard, for which solutions\n * exist for all natural numbers n with the exception of n = 2 and n = 3.\n *\n * @author Unknown author\n * @author [David Leal](https://github.com/Panquesito7)\n *\n */</span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;array&gt;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span>\n\n<span class=\"hljs-comment\">/**\n * @namespace backtracking\n * @brief Backtracking algorithms\n */</span>\n<span class=\"hljs-keyword\">namespace</span> backtracking {\n<span class=\"hljs-comment\">/**\n * @namespace n_queens\n * @brief Functions for [Eight\n * Queens](https://en.wikipedia.org/wiki/Eight_queens_puzzle) puzzle.\n */</span>\n<span class=\"hljs-keyword\">namespace</span> n_queens {\n<span class=\"hljs-comment\">/**\n * Utility function to print matrix\n * @tparam n number of matrix size\n * @param board matrix where numbers are saved\n */</span>\n<span class=\"hljs-keyword\">template</span> &lt;<span class=\"hljs-type\">size_t</span> n&gt;\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">printSolution</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> std::array&lt;std::array&lt;<span class=\"hljs-type\">int</span>, n&gt;, n&gt; &amp;board)</span> </span>{\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;\\n&quot;</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++) {\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; n; j++) {\n            std::cout &lt;&lt; <span class=\"hljs-string\">&quot;&quot;</span> &lt;&lt; board[i][j] &lt;&lt; <span class=\"hljs-string\">&quot; &quot;</span>;\n        }\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;\\n&quot;</span>;\n    }\n}\n\n<span class=\"hljs-comment\">/**\n * Check if a queen can be placed on matrix\n * @tparam n number of matrix size\n * @param board matrix where numbers are saved\n * @param row current index in rows\n * @param col current index in columns\n * @returns `true` if queen can be placed on matrix\n * @returns `false` if queen can&#x27;t be placed on matrix\n */</span>\n<span class=\"hljs-keyword\">template</span> &lt;<span class=\"hljs-type\">size_t</span> n&gt;\n<span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isSafe</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> std::array&lt;std::array&lt;<span class=\"hljs-type\">int</span>, n&gt;, n&gt; &amp;board, <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> &amp;row,\n            <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> &amp;col)</span> </span>{\n    <span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>, j = <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-comment\">// Check this row on left side</span>\n    <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; col; i++) {\n        <span class=\"hljs-keyword\">if</span> (board[row][i]) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n        }\n    }\n\n    <span class=\"hljs-comment\">// Check upper diagonal on left side</span>\n    <span class=\"hljs-keyword\">for</span> (i = row, j = col; i &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; j &gt;= <span class=\"hljs-number\">0</span>; i--, j--) {\n        <span class=\"hljs-keyword\">if</span> (board[i][j]) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n        }\n    }\n    <span class=\"hljs-comment\">// Check lower diagonal on left side</span>\n    <span class=\"hljs-keyword\">for</span> (i = row, j = col; j &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; i &lt; n; i++, j--) {\n        <span class=\"hljs-keyword\">if</span> (board[i][j]) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n}\n\n<span class=\"hljs-comment\">/**\n * Solve n queens problem\n * @tparam n number of matrix size\n * @param board matrix where numbers are saved\n * @param col current index in columns\n */</span>\n<span class=\"hljs-keyword\">template</span> &lt;<span class=\"hljs-type\">size_t</span> n&gt;\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">solveNQ</span><span class=\"hljs-params\">(std::array&lt;std::array&lt;<span class=\"hljs-type\">int</span>, n&gt;, n&gt; board, <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> &amp;col)</span> </span>{\n    <span class=\"hljs-keyword\">if</span> (col &gt;= n) {\n        <span class=\"hljs-built_in\">printSolution</span>&lt;n&gt;(board);\n        <span class=\"hljs-keyword\">return</span>;\n    }\n\n    <span class=\"hljs-comment\">// Consider this column and try placing</span>\n    <span class=\"hljs-comment\">// this queen in all rows one by one</span>\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++) {\n        <span class=\"hljs-comment\">// Check if queen can be placed</span>\n        <span class=\"hljs-comment\">// on board[i][col]</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">isSafe</span>&lt;n&gt;(board, i, col)) {\n            <span class=\"hljs-comment\">// Place this queen in matrix</span>\n            board[i][col] = <span class=\"hljs-number\">1</span>;\n\n            <span class=\"hljs-comment\">// Recursive to place rest of the queens</span>\n            <span class=\"hljs-built_in\">solveNQ</span>&lt;n&gt;(board, col + <span class=\"hljs-number\">1</span>);\n\n            board[i][col] = <span class=\"hljs-number\">0</span>;  <span class=\"hljs-comment\">// backtrack</span>\n        }\n    }\n}\n}  <span class=\"hljs-comment\">// namespace n_queens</span>\n}  <span class=\"hljs-comment\">// namespace backtracking</span>\n\n<span class=\"hljs-comment\">/**\n * @brief Main function\n * @returns 0 on exit\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> n = <span class=\"hljs-number\">4</span>;\n    std::array&lt;std::array&lt;<span class=\"hljs-type\">int</span>, n&gt;, n&gt; board = {\n        std::<span class=\"hljs-built_in\">array</span>&lt;<span class=\"hljs-type\">int</span>, n&gt;({<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>}), std::<span class=\"hljs-built_in\">array</span>&lt;<span class=\"hljs-type\">int</span>, n&gt;({<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>}),\n        std::<span class=\"hljs-built_in\">array</span>&lt;<span class=\"hljs-type\">int</span>, n&gt;({<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>}), std::<span class=\"hljs-built_in\">array</span>&lt;<span class=\"hljs-type\">int</span>, n&gt;({<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>})};\n\n    backtracking::n_queens::<span class=\"hljs-built_in\">solveNQ</span>&lt;n&gt;(board, <span class=\"hljs-number\">0</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n}\n"
    },
    "java": {
      "dir": "src/main/java/com/thealgorithms/backtracking/NQueens.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src/main/java/com/thealgorithms/backtracking/NQueens.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.backtracking;\n\n<span class=\"hljs-keyword\">import</span> java.util.ArrayList;\n<span class=\"hljs-keyword\">import</span> java.util.List;\n\n<span class=\"hljs-comment\">/**\n * Problem statement: Given a N x N chess board. Return all arrangements in\n * which N queens can be placed on the board such no two queens attack each\n * other. Ex. N = 6 Solution= There are 4 possible ways Arrangement: 1 &quot;.Q....&quot;,\n * &quot;...Q..&quot;, &quot;.....Q&quot;, &quot;Q.....&quot;, &quot;..Q...&quot;, &quot;....Q.&quot;\n * &lt;p&gt;\n * Arrangement: 2 &quot;..Q...&quot;, &quot;.....Q&quot;, &quot;.Q....&quot;, &quot;....Q.&quot;, &quot;Q.....&quot;, &quot;...Q..&quot;\n * &lt;p&gt;\n * Arrangement: 3 &quot;...Q..&quot;, &quot;Q.....&quot;, &quot;....Q.&quot;, &quot;.Q....&quot;, &quot;.....Q&quot;, &quot;..Q...&quot;\n * &lt;p&gt;\n * Arrangement: 4 &quot;....Q.&quot;, &quot;..Q...&quot;, &quot;Q.....&quot;, &quot;.....Q&quot;, &quot;...Q..&quot;, &quot;.Q....&quot;\n *\n * Solution: Brute Force approach:\n *\n * Generate all possible arrangement to place N queens on N*N board. Check each\n * board if queens are placed safely. If it is safe, include arrangement in\n * solution set. Otherwise ignore it\n *\n * Optimized solution: This can be solved using backtracking in below steps\n *\n * Start with first column and place queen on first row Try placing queen in a\n * row on second column If placing second queen in second column attacks any of\n * the previous queens, change the row in second column otherwise move to next\n * column and try to place next queen In case if there is no rows where a queen\n * can be placed such that it doesn&#x27;t attack previous queens, then go back to\n * previous column and change row of previous queen. Keep doing this until last\n * queen is not placed safely. If there is no such way then return an empty list\n * as solution\n */</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NQueens</span> {\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n        placeQueens(<span class=\"hljs-number\">1</span>);\n        placeQueens(<span class=\"hljs-number\">2</span>);\n        placeQueens(<span class=\"hljs-number\">3</span>);\n        placeQueens(<span class=\"hljs-number\">4</span>);\n        placeQueens(<span class=\"hljs-number\">5</span>);\n        placeQueens(<span class=\"hljs-number\">6</span>);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">placeQueens</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> queens)</span> {\n        List&lt;List&lt;String&gt;&gt; arrangements = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;List&lt;String&gt;&gt;();\n        getSolution(queens, arrangements, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[queens], <span class=\"hljs-number\">0</span>);\n        <span class=\"hljs-keyword\">if</span> (arrangements.isEmpty()) {\n            System.out.println(<span class=\"hljs-string\">&quot;There is no way to place &quot;</span> + queens + <span class=\"hljs-string\">&quot; queens on board of size &quot;</span> + queens + <span class=\"hljs-string\">&quot;x&quot;</span> + queens);\n        } <span class=\"hljs-keyword\">else</span> {\n            System.out.println(<span class=\"hljs-string\">&quot;Arrangement for placing &quot;</span> + queens + <span class=\"hljs-string\">&quot; queens&quot;</span>);\n        }\n        arrangements.forEach(arrangement -&gt; {\n            arrangement.forEach(row -&gt; System.out.println(row));\n            System.out.println();\n        });\n    }\n\n    <span class=\"hljs-comment\">/**\n     * This is backtracking function which tries to place queen recursively\n     *\n     * <span class=\"hljs-doctag\">@param</span> boardSize: size of chess board\n     * <span class=\"hljs-doctag\">@param</span> solutions: this holds all possible arrangements\n     * <span class=\"hljs-doctag\">@param</span> columns: columns[i] = rowId where queen is placed in ith column.\n     * <span class=\"hljs-doctag\">@param</span> columnIndex: This is the column in which queen is being placed\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">getSolution</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> boardSize, List&lt;List&lt;String&gt;&gt; solutions, <span class=\"hljs-type\">int</span>[] columns, <span class=\"hljs-type\">int</span> columnIndex)</span> {\n        <span class=\"hljs-keyword\">if</span> (columnIndex == boardSize) {\n            <span class=\"hljs-comment\">// this means that all queens have been placed</span>\n            List&lt;String&gt; sol = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;String&gt;();\n            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; boardSize; i++) {\n                <span class=\"hljs-type\">StringBuilder</span> <span class=\"hljs-variable\">sb</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuilder</span>();\n                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">j</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; j &lt; boardSize; j++) {\n                    sb.append(j == columns[i] ? <span class=\"hljs-string\">&quot;Q&quot;</span> : <span class=\"hljs-string\">&quot;.&quot;</span>);\n                }\n                sol.add(sb.toString());\n            }\n            solutions.add(sol);\n            <span class=\"hljs-keyword\">return</span>;\n        }\n\n        <span class=\"hljs-comment\">// This loop tries to place queen in a row one by one</span>\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rowIndex</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; rowIndex &lt; boardSize; rowIndex++) {\n            columns[columnIndex] = rowIndex;\n            <span class=\"hljs-keyword\">if</span> (isPlacedCorrectly(columns, rowIndex, columnIndex)) {\n                <span class=\"hljs-comment\">// If queen is placed successfully at rowIndex in column=columnIndex then try placing queen in next column</span>\n                getSolution(boardSize, solutions, columns, columnIndex + <span class=\"hljs-number\">1</span>);\n            }\n        }\n    }\n\n    <span class=\"hljs-comment\">/**\n     * This function checks if queen can be placed at row = rowIndex in column =\n     * columnIndex safely\n     *\n     * <span class=\"hljs-doctag\">@param</span> columns: columns[i] = rowId where queen is placed in ith column.\n     * <span class=\"hljs-doctag\">@param</span> rowIndex: row in which queen has to be placed\n     * <span class=\"hljs-doctag\">@param</span> columnIndex: column in which queen is being placed\n     * <span class=\"hljs-doctag\">@return</span> true: if queen can be placed safely false: otherwise\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isPlacedCorrectly</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span>[] columns, <span class=\"hljs-type\">int</span> rowIndex, <span class=\"hljs-type\">int</span> columnIndex)</span> {\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; columnIndex; i++) {\n            <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">diff</span> <span class=\"hljs-operator\">=</span> Math.abs(columns[i] - rowIndex);\n            <span class=\"hljs-keyword\">if</span> (diff == <span class=\"hljs-number\">0</span> || columnIndex - i == diff) {\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n    }\n}\n"
    },
    "haskell": {
      "dir": "src/Misc/NQueens.hs",
      "url": "https://github.com/TheAlgorithms/haskell/tree/master/src/Misc/NQueens.hs",
      "code": "<span class=\"hljs-keyword\">module</span> Misc.NQueens <span class=\"hljs-keyword\">where</span>\n<span class=\"hljs-comment\">{-\nThe n-Queens search is a backtracking algorithm. The n-Queens problem fits n \nnumber of Queens onto a Chess board. As only one Queen can fit per row, a \none-dimensional integer array is used to represent the Queen&#x27;s offset on each \nrow.\n-}</span>\n\n<span class=\"hljs-keyword\">import</span> Data.List (<span class=\"hljs-title\">permutations</span>)\n\n<span class=\"hljs-title\">main</span> = nqueens <span class=\"hljs-number\">8</span>\n<span class=\"hljs-title\">nqueens</span> size = mapM_ (printBoard size) $ take <span class=\"hljs-number\">1</span> $ filter (evaluateBoard size) $ board_permutations size\n\n<span class=\"hljs-comment\">--N sized Chess boards are represented as a one-dimension array.</span>\n<span class=\"hljs-title\">board_permutations</span> size = permutations [<span class=\"hljs-number\">0</span>..size - <span class=\"hljs-number\">1</span>]\n\n<span class=\"hljs-comment\">--Count the number of valid boards for a specified Chess board size.</span>\n<span class=\"hljs-title\">count_boards</span> size = length $ filter (evaluateBoard size) $ board_permutations size\n\n<span class=\"hljs-comment\">--Show every valid board </span>\n<span class=\"hljs-title\">nqueens_list</span> size = mapM_ (printBoard size) $ filter (evaluateBoard size) $ board_permutations size\n\n<span class=\"hljs-comment\">--Board printing function</span>\n<span class=\"hljs-title\">printBoard</span> size board = <span class=\"hljs-keyword\">do</span> \n    printBoard2 size board \n    putStrLn <span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-keyword\">where</span>\n        printBoard2 _ [] = return ()\n        printBoard2 size board = <span class=\"hljs-keyword\">do</span>\n            <span class=\"hljs-keyword\">let</span> row = head board\n            printRow size row\n            printBoard2 size $ tail board\n\n<span class=\"hljs-title\">printRow</span> size row = <span class=\"hljs-keyword\">do</span>\n    <span class=\"hljs-keyword\">let</span> lstring = (replicate row <span class=\"hljs-string\">&quot;. &quot;</span>)\n    <span class=\"hljs-keyword\">let</span> rstring = replicate (size - row - <span class=\"hljs-number\">1</span>) <span class=\"hljs-string\">&quot;. &quot;</span>\n    putStrLn $ concat (lstring ++ [<span class=\"hljs-string\">&quot;Q &quot;</span>] ++ rstring)\n    return ()\n\n<span class=\"hljs-comment\">--Recursively check that prior rows are valid.</span>\n<span class=\"hljs-title\">evaluateBoard</span> _ [] = <span class=\"hljs-type\">True</span>\n<span class=\"hljs-title\">evaluateBoard</span> size rows = (evaluateBoard size $ cut_last rows) &amp;&amp; validate size (cut_last rows) (last_row - <span class=\"hljs-number\">1</span>) (last_row + <span class=\"hljs-number\">1</span>) last_row <span class=\"hljs-keyword\">where</span>\n    last_row = last rows\n\n<span class=\"hljs-comment\">--Validate that a Queen on a row doesn&#x27;t have conflicts with earlier rows.</span>\n<span class=\"hljs-title\">validate</span> _ [] _ _ _ = <span class=\"hljs-type\">True</span>\n<span class=\"hljs-title\">validate</span> size rows left right position = <span class=\"hljs-keyword\">if</span> check_row == left || check_row == right || check_row == position <span class=\"hljs-keyword\">then</span> <span class=\"hljs-type\">False</span> <span class=\"hljs-keyword\">else</span> validate size (cut_last rows) (left - <span class=\"hljs-number\">1</span>) (right + <span class=\"hljs-number\">1</span>) position <span class=\"hljs-keyword\">where</span>\n    check_row = last rows\n\n<span class=\"hljs-title\">cut_last</span> x = reverse $ drop <span class=\"hljs-number\">1</span> $ reverse x\n"
    },
    "rust": {
      "dir": "src/general/nqueens.rs",
      "url": "https://github.com/TheAlgorithms/rust/tree/master/src/general/nqueens.rs",
      "code": "<span class=\"hljs-meta\">#[allow(unused_imports)]</span>\n<span class=\"hljs-keyword\">use</span> std::env::args;\n\n<span class=\"hljs-meta\">#[allow(dead_code)]</span>\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">board_width</span> = <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">arg</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-title function_ invoke__\">args</span>() {\n        board_width = <span class=\"hljs-keyword\">match</span> arg.<span class=\"hljs-title function_ invoke__\">parse</span>() {\n            <span class=\"hljs-title function_ invoke__\">Ok</span>(x) =&gt; x,\n            _ =&gt; <span class=\"hljs-number\">0</span>,\n        };\n\n        <span class=\"hljs-keyword\">if</span> board_width != <span class=\"hljs-number\">0</span> {\n            <span class=\"hljs-keyword\">break</span>;\n        }\n    }\n\n    <span class=\"hljs-keyword\">if</span> board_width &lt; <span class=\"hljs-number\">4</span> {\n        <span class=\"hljs-built_in\">println!</span>(\n            <span class=\"hljs-string\">&quot;Running algorithm with 8 as a default. Specify an alternative Chess board size for \\\n             N-Queens as a command line argument.\\n&quot;</span>\n        );\n        board_width = <span class=\"hljs-number\">8</span>;\n    }\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">board</span> = <span class=\"hljs-keyword\">match</span> <span class=\"hljs-title function_ invoke__\">nqueens</span>(board_width) {\n        <span class=\"hljs-title function_ invoke__\">Ok</span>(success) =&gt; success,\n        <span class=\"hljs-title function_ invoke__\">Err</span>(err) =&gt; <span class=\"hljs-built_in\">panic!</span>(<span class=\"hljs-string\">&quot;{}&quot;</span>, err),\n    };\n\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;N-Queens {} by {} board result:&quot;</span>, board_width, board_width);\n    <span class=\"hljs-title function_ invoke__\">print_board</span>(&amp;board);\n}\n\n<span class=\"hljs-comment\">/*\nThe n-Queens search is a backtracking algorithm. Each row of the Chess board where a Queen is\nplaced is dependent on all earlier rows. As only one Queen can fit per row, a one-dimensional\ninteger array is used to represent the Queen&#x27;s offset on each row.\n*/</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">nqueens</span>(board_width: <span class=\"hljs-type\">i64</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Result</span>&lt;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">i64</span>&gt;, &amp;<span class=\"hljs-symbol\">&#x27;static</span> <span class=\"hljs-type\">str</span>&gt; {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">board_rows</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>; board_width <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>];\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">conflict</span>;\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">current_row</span> = <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-comment\">//Process by row up to the current active row</span>\n    <span class=\"hljs-keyword\">loop</span> {\n        conflict = <span class=\"hljs-literal\">false</span>;\n\n        <span class=\"hljs-comment\">//Column review of previous rows</span>\n        <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">review_index</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..current_row {\n            <span class=\"hljs-comment\">//Calculate the diagonals of earlier rows where a Queen would be a conflict</span>\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">left</span> = board_rows[review_index] - (current_row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> - review_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span>);\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">right</span> = board_rows[review_index] + (current_row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> - review_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span>);\n\n            <span class=\"hljs-keyword\">if</span> board_rows[current_row] == board_rows[review_index]\n                || (left &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; left == board_rows[current_row])\n                || (right &lt; board_width <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> &amp;&amp; right == board_rows[current_row])\n            {\n                conflict = <span class=\"hljs-literal\">true</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            }\n        }\n\n        <span class=\"hljs-keyword\">match</span> conflict {\n            <span class=\"hljs-literal\">true</span> =&gt; {\n                board_rows[current_row] += <span class=\"hljs-number\">1</span>;\n\n                <span class=\"hljs-keyword\">if</span> current_row == <span class=\"hljs-number\">0</span> &amp;&amp; board_rows[current_row] == board_width {\n                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_ invoke__\">Err</span>(<span class=\"hljs-string\">&quot;No solution exists for specificed board size.&quot;</span>);\n                }\n\n                <span class=\"hljs-keyword\">while</span> board_rows[current_row] == board_width {\n                    board_rows[current_row] = <span class=\"hljs-number\">0</span>;\n\n                    <span class=\"hljs-keyword\">if</span> current_row == <span class=\"hljs-number\">0</span> {\n                        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_ invoke__\">Err</span>(<span class=\"hljs-string\">&quot;No solution exists for specificed board size.&quot;</span>);\n                    }\n\n                    current_row -= <span class=\"hljs-number\">1</span>;\n                    board_rows[current_row] += <span class=\"hljs-number\">1</span>;\n                }\n            }\n            _ =&gt; {\n                current_row += <span class=\"hljs-number\">1</span>;\n\n                <span class=\"hljs-keyword\">if</span> current_row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> == board_width {\n                    <span class=\"hljs-keyword\">break</span>;\n                }\n            }\n        }\n    }\n\n    <span class=\"hljs-title function_ invoke__\">Ok</span>(board_rows)\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">print_board</span>(board: &amp;[<span class=\"hljs-type\">i64</span>]) {\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">row</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..board.<span class=\"hljs-title function_ invoke__\">len</span>() {\n        <span class=\"hljs-built_in\">print!</span>(<span class=\"hljs-string\">&quot;{}\\t&quot;</span>, board[row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>]);\n\n        <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">column</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..board.<span class=\"hljs-title function_ invoke__\">len</span>() <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> {\n            <span class=\"hljs-keyword\">if</span> board[row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>] == column {\n                <span class=\"hljs-built_in\">print!</span>(<span class=\"hljs-string\">&quot;Q&quot;</span>);\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-built_in\">print!</span>(<span class=\"hljs-string\">&quot;.&quot;</span>);\n            }\n        }\n        <span class=\"hljs-built_in\">println!</span>();\n    }\n}\n\n<span class=\"hljs-meta\">#[cfg(test)]</span>\n<span class=\"hljs-keyword\">mod</span> test {\n    <span class=\"hljs-keyword\">use</span> super::*;\n\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">check_board</span>(board: &amp;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">i64</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n        <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">current_row</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..board.<span class=\"hljs-title function_ invoke__\">len</span>() {\n            <span class=\"hljs-comment\">//Column review</span>\n            <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">review_index</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..current_row {\n                <span class=\"hljs-comment\">//Look for any conflict.</span>\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">left</span> = board[review_index] - (current_row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> - review_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span>);\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">right</span> = board[review_index] + (current_row <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> - review_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span>);\n\n                <span class=\"hljs-keyword\">if</span> board[current_row] == board[review_index]\n                    || (left &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; left == board[current_row])\n                    || (right &lt; board.<span class=\"hljs-title function_ invoke__\">len</span>() <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">i64</span> &amp;&amp; right == board[current_row])\n                {\n                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n                }\n            }\n        }\n        <span class=\"hljs-literal\">true</span>\n    }\n\n    <span class=\"hljs-meta\">#[test]</span>\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">test_board_size_4</span>() {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">board</span> = <span class=\"hljs-title function_ invoke__\">nqueens</span>(<span class=\"hljs-number\">4</span>).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Error propagated.&quot;</span>);\n        <span class=\"hljs-built_in\">assert_eq!</span>(board, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">2</span>]);\n        <span class=\"hljs-built_in\">assert!</span>(<span class=\"hljs-title function_ invoke__\">check_board</span>(&amp;board));\n    }\n\n    <span class=\"hljs-meta\">#[test]</span>\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">test_board_size_7</span>() {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">board</span> = <span class=\"hljs-title function_ invoke__\">nqueens</span>(<span class=\"hljs-number\">7</span>).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Error propagated.&quot;</span>);\n        <span class=\"hljs-built_in\">assert_eq!</span>(board, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">5</span>]);\n        <span class=\"hljs-built_in\">assert!</span>(<span class=\"hljs-title function_ invoke__\">check_board</span>(&amp;board));\n    }\n}\n"
    }
  },
  "contributors": [
    {
      "name": "Anup Kumar Panwar",
      "email": "1anuppanwar@gmail.com",
      "commits": 1
    },
    {
      "name": "DONSIMON92",
      "email": "47272787+DONSIMON92@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Krishna Vedala",
      "email": "7001608+kvedala@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Libin Yang",
      "email": "szuyanglb@outlook.com",
      "commits": 1
    },
    {
      "name": "John Law",
      "email": "johnlaw.po@gmail.com",
      "commits": 1
    },
    {
      "name": "Amit Kumar",
      "email": "kumanoit@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Jenia Dysin",
      "email": "jenia90@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "matkosoric",
      "email": "soric.matko@gmail.com",
      "commits": 1
    },
    {
      "name": "William Zhang",
      "email": "39932068+WilliamHYZhang@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Hetal Kuvadia",
      "email": "hetal.kuvadia@somaiya.edu",
      "commits": 1
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 4
    },
    {
      "name": "David Makray",
      "email": "dmakray@gmail.com",
      "commits": 5
    },
    {
      "name": "David Leal",
      "email": "halfpacho@gmail.com",
      "commits": 7
    }
  ],
  "explanationUrl": {}
}