{
  "slug": "validate-credit-card",
  "name": "Validate Credit Card",
  "categories": [
    "strings"
  ],
  "body": {},
  "implementations": {
    "javascript": {
      "dir": "String/ValidateCreditCard.js",
      "url": "https://github.com/TheAlgorithms/javascript/tree/master/String/ValidateCreditCard.js",
      "code": "<span class=\"hljs-comment\">/**\n * Validate a given credit card number\n *\n * The core of the validation of credit card numbers is the Luhn algorithm.\n *\n * The validation sum should be completely divisible by 10 which is calculated as follows,\n * every first digit is added directly to the validation sum.\n * For every second digit in the credit card number, the digit is multiplied by 2.\n * If the product is greater than 10 the digits of the product are added.\n * This resultant digit is considered for the validation sum rather than the digit itself.\n *\n * Ref: https://www.geeksforgeeks.org/luhn-algorithm/\n */</span>\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">luhnValidation</span> = (<span class=\"hljs-params\">creditCardNumber</span>) =&gt; {\n  <span class=\"hljs-keyword\">let</span> validationSum = <span class=\"hljs-number\">0</span>\n  creditCardNumber.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">digit, index</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> currentDigit = <span class=\"hljs-built_in\">parseInt</span>(digit)\n    <span class=\"hljs-keyword\">if</span> (index % <span class=\"hljs-number\">2</span> === <span class=\"hljs-number\">0</span>) {\n      <span class=\"hljs-comment\">// Multiply every 2nd digit from the left by 2</span>\n      currentDigit *= <span class=\"hljs-number\">2</span>\n      <span class=\"hljs-comment\">// if product is greater than 10 add the individual digits of the product to get a single digit</span>\n      <span class=\"hljs-keyword\">if</span> (currentDigit &gt; <span class=\"hljs-number\">9</span>) {\n        currentDigit %= <span class=\"hljs-number\">10</span>\n        currentDigit += <span class=\"hljs-number\">1</span>\n      }\n    }\n    validationSum += currentDigit\n  })\n\n  <span class=\"hljs-keyword\">return</span> validationSum % <span class=\"hljs-number\">10</span> === <span class=\"hljs-number\">0</span>\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validateCreditCard</span> = (<span class=\"hljs-params\">creditCardString</span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> validStartSubString = [<span class=\"hljs-string\">&#x27;4&#x27;</span>, <span class=\"hljs-string\">&#x27;5&#x27;</span>, <span class=\"hljs-string\">&#x27;6&#x27;</span>, <span class=\"hljs-string\">&#x27;37&#x27;</span>, <span class=\"hljs-string\">&#x27;34&#x27;</span>, <span class=\"hljs-string\">&#x27;35&#x27;</span>] <span class=\"hljs-comment\">// Valid credit card numbers start with these numbers</span>\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> creditCardString !== <span class=\"hljs-string\">&#x27;string&#x27;</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&#x27;The given value is not a string&#x27;</span>)\n  }\n\n  <span class=\"hljs-keyword\">const</span> errorMessage = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${creditCardString}</span> is an invalid credit card number because `</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">isNaN</span>(creditCardString)) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(errorMessage + <span class=\"hljs-string\">&#x27;it has nonnumerical characters.&#x27;</span>)\n  }\n  <span class=\"hljs-keyword\">const</span> creditCardStringLength = creditCardString.<span class=\"hljs-property\">length</span>\n  <span class=\"hljs-keyword\">if</span> (!((creditCardStringLength &gt;= <span class=\"hljs-number\">13</span>) &amp;&amp; (creditCardStringLength &lt;= <span class=\"hljs-number\">16</span>))) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(errorMessage + <span class=\"hljs-string\">&#x27;of its length.&#x27;</span>)\n  }\n  <span class=\"hljs-keyword\">if</span> (!validStartSubString.<span class=\"hljs-title function_\">some</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">subString</span> =&gt;</span> creditCardString.<span class=\"hljs-title function_\">startsWith</span>(subString))) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(errorMessage + <span class=\"hljs-string\">&#x27;of its first two digits.&#x27;</span>)\n  }\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">luhnValidation</span>(creditCardString)) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(errorMessage + <span class=\"hljs-string\">&#x27;it fails the Luhn check.&#x27;</span>)\n  }\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n}\n\n<span class=\"hljs-keyword\">export</span> { validateCreditCard }\n"
    }
  },
  "contributors": [
    {
      "name": "@im_8055",
      "email": "38890773+Bhargavishnu@users.noreply.github.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}